{% extends 'base.html' %}
{% block content %}
<div class="sidebar">
    <div class="sidebar-title">Automation</div>
    <ul>
        <li class="active"><span>âš¡</span> Rules <button id="addRuleBtn">+</button></li>

    </ul>
</div>
<div class="main-content">
    <h2>Rules</h2>
    <div class="card" style="margin-bottom:16px;padding:12px;border:1px solid #ddd;border-radius:8px;">
        {% if gmail_connected %}
        <div>
            <strong>Gmail:</strong>
            Connected{% if gmail_profile.emailAddress %} as {{ gmail_profile.emailAddress }}{% endif %}.
            <a href="/gmail/disconnect/" style="margin-left:12px;">Disconnect</a>
        </div>
        {% else %}
        <div>
            <strong>Gmail:</strong> Not connected.
            <a href="/gmail/connect/" style="margin-left:12px;">Connect Gmail</a>
        </div>
        {% endif %}
    </div>

    <!-- Stats Card -->
    <div class="card"
        style="margin-bottom:16px;padding:12px;border:1px solid #ddd;border-radius:8px; display: flex; gap: 20px;">
        <div>
            <strong>Sent Today:</strong> {{ today_count }}
        </div>
        <div>
            <strong>Total Sent:</strong> {{ total_count }}
        </div>
    </div>
    <div id="rulesTableContainer"></div>
    <div id="ruleModal" class="modal" style="display:none;"></div>
</div>
<script src="/static/rules_dashboard.js"></script>
{% endblock %}